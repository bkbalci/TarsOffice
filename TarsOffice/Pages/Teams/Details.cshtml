@page "{id}"
@model TarsOffice.Pages.Teams.DetailsModel

@{
    ViewData["Title"] = "Details";
}

<h1>@Model.Team.Name</h1>

<div class="row">
    <div class="col-md-8">
        <h2>Upcomming team bookings</h2>
        @foreach (var teamBooking in Model.TeamBookings)
        {
    <div>
        <h4>@teamBooking.Date</h4>
        @if (!teamBooking.IsAnyMine) 
        {
            <p><a asp-page="../Bookings/Create" asp-route-date="@teamBooking.Date.ToString("yyyy-MM-dd")">create</a></p>
        }
        <ul>
            @foreach (var booking in teamBooking.TeamBookings)
            {
                <li>
                    @booking.User.UserName
                    @if (booking.Status == BookingStatus.Tentative)
                    {
                        <span>(tentative)</span>
                    }
                    @if(booking.ItsMe)
                    {
                        <a asp-page="../Bookings/Edit" asp-route-id="@booking.Id" >edit</a>
                        <a asp-page="../Bookings/Delete" asp-route-id="@booking.Id" >delete</a>
                    }
                </li>
            }
        </ul>
    </div>
        }
    </div>
</div>
<div>
    <a asp-page="./Edit" asp-route-id="@Model.Team.Id">Edit</a> |
    <a asp-page="../Index">Back to List</a>
</div>
